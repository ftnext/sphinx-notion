# sphinx-notion ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
sphinx-notion ã¯ Sphinx ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ Notion ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
```
src/sphinx_notion/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ __main__.py
â”œâ”€â”€ writers.py          # Notion ã¸ã®å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ (NotionTranslator)
â””â”€â”€ nodes/
    â””â”€â”€ literal_block.py  # ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯é–¢é€£

tests/
â”œâ”€â”€ roots/              # å„æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ test-list-item/ # ãƒªã‚¹ãƒˆæ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test-code/      # ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ ...
â””â”€â”€ test_builder.py     # ãƒ¡ã‚¤ãƒ³ã®ãƒ†ã‚¹ãƒˆ

example/                # ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```

## é–‹ç™ºç’°å¢ƒ
- Python 3.11+
- ä»®æƒ³ç’°å¢ƒ: `.venv`
- **æ³¨æ„**: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå‰ã«ä»®æƒ³ç’°å¢ƒã‚’æœ‰åŠ¹åŒ–ã™ã‚‹å¿…è¦ã‚ã‚Š
  ```bash
  source .venv/bin/activate  # ã¾ãŸã¯
  . .venv/bin/activate
  ```
- ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼: pytest (`.venv/bin/pytest` ã¾ãŸã¯ `task test`)
- ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«: uv (`task test` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ)
- ã‚³ãƒãƒ³ãƒ‰ä¾‹:
  - ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: `task test` ã¾ãŸã¯ `.venv/bin/pytest`
  - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: `uv add {package}`

## å®Ÿè£…æ¸ˆã¿ã®æ©Ÿèƒ½
- âœ… è¦‹å‡ºã— (heading_1, heading_2, heading_3)
- âœ… æ®µè½ (paragraph)
- âœ… éé †åºä»˜ããƒªã‚¹ãƒˆ (bulleted_list_item)
- âœ… é †åºä»˜ããƒªã‚¹ãƒˆ (numbered_list_item)
- âœ… ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ (code)
- âœ… ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³è¦ç´  (å¤ªå­—ã€ãƒªãƒ³ã‚¯)
- âœ… æ³¨é‡ˆ (note, tip, hint)
- âœ… å¼•ç”¨ãƒ–ãƒ­ãƒƒã‚¯ (quote)

## Notion API ãƒãƒƒãƒ”ãƒ³ã‚°
| Sphinx/reST | Notion API |
|-------------|------------|
| `* é …ç›®` | `bulleted_list_item` |
| `1. é …ç›®` | `numbered_list_item` |
| `.. note::` | `callout` (ğŸ“, blue) |
| `.. tip::` | `callout` (âœ¨, gray) |
| `.. hint::` | `callout` (ğŸ’¡, green) |
| `    å¼•ç”¨` | `quote` |
| `.. code-block::` | `code` |

## ãƒ†ã‚¹ãƒˆã®è¿½åŠ æ–¹æ³•
1. `tests/roots/test-{æ©Ÿèƒ½å}/source/` ã« `index.rst` ã‚’ä½œæˆ
2. `tests/roots/test-{æ©Ÿèƒ½å}/expected.json` ã«æœŸå¾…ã•ã‚Œã‚‹ Notion API å‡ºåŠ›ã‚’è¨˜è¿°
3. `tests/test_builder.py` ã® `test_convert` ã«ã‚±ãƒ¼ã‚¹åã‚’è¿½åŠ 
4. `task test` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

## æ³¨æ„äº‹é …
- `writers.py` ã® `NotionTranslator` ã‚¯ãƒ©ã‚¹ãŒå¤‰æ›ã®ä¸­å¿ƒ
- æ–°ã—ã„ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ `visit_{node_type}` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…
- Notion API ã®åˆ¶é™ï¼ˆã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®æ–‡å­—æ•°åˆ¶é™ãªã©ï¼‰ã«æ³¨æ„
- æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆã‚’å£Šã•ãªã„ã‚ˆã†ã« `expected.json` ã®å½¢å¼ã‚’ç¶­æŒ
